<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Kaspi 电商利润计算器</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        /* 锁定屏幕样式 */
        .lock-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            z-index: 10000;
        }

        .lock-container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 30px;
            width: 90%;
            max-width: 500px;
            text-align: center;
        }

        .lock-header {
            margin-bottom: 25px;
        }

        .lock-header h1 {
            font-size: 22px;
            color: #1a2a6c;
            margin-bottom: 8px;
        }

        .lock-header h2 {
            font-size: 18px;
            color: #d35400;
            font-weight: 600;
        }

        .lock-form {
            padding: 20px 0;
        }

        .lock-form .form-group {
            margin-bottom: 20px;
        }

        .lock-form input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #3498db;
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
        }

        .btn-unlock {
            display: block;
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .btn-unlock:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .lock-time {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
            color: #0d47a1;
            display: flex;
            justify-content: space-between;
        }

        .lock-language {
            margin: 20px 0;
        }

        .lock-contact {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .lock-contact .contact-info {
            font-size: 16px;
        }

        .lock-contact #lock-contact-link {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 20px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .lock-contact #lock-contact-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        /* 密钥验证状态 */
        .key-validation {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            color: white;
            text-align: center;
        }
        
        .key-status {
            font-weight: bold;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }
        
        .valid-key {
            background: #28a745;
            color: white;
        }
        
        .invalid-key {
            background: #dc3545;
            color: white;
        }

        /* 主应用样式 */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 20px;
            position: relative;
            overflow: hidden;
            display: none;
        }

        .container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, #ff8c00, #ffd700, #ff8c00);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 15px;
            padding-top: 40px;
        }

        .header h1 {
            font-size: 24px;
            color: #1a2a6c;
            margin-bottom: 8px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .header h2 {
            font-size: 18px;
            color: #d35400;
            font-weight: 600;
        }

        .header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 3px;
            background: linear-gradient(90deg, #1a2a6c, #3498db, #1a2a6c);
            border-radius: 2px;
        }

        .exchange-rate {
            background-color: #e3f2fd;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            border: 1px solid #bbdefb;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .exchange-rate label {
            font-weight: bold;
            color: #0d47a1;
            font-size: 16px;
            white-space: nowrap;
            margin: 0;
        }

        .exchange-rate input {
            font-size: 16px;
            padding: 8px 12px;
            border: 2px solid #64b5f6;
            border-radius: 8px;
            width: 150px;
            text-align: center;
            color: #1565c0;
            font-weight: bold;
            background-color: #fff;
            margin: 0;
            vertical-align: middle;
        }

        .input-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .section {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
        }

        .section-title {
            font-size: 18px;
            color: #1a2a6c;
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 2px solid #3498db;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 15px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #2c3e50;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
        }

        .form-control:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        .form-control::placeholder {
            color: #aaa;
            font-style: italic;
        }

        .error-message {
            color: #e74c3c;
            font-size: 13px;
            margin-top: 4px;
            display: none;
        }

        .dimensions {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
        }

        .kaspi-price-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .kaspi-price-box {
            display: flex;
            flex-direction: column;
        }

        .kaspi-price-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 4px;
        }

        .output-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .output-group {
            background-color: #e8f5e9;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
            border: 1px solid #c8e6c9;
        }

        .output-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #2e7d32;
            font-size: 14px;
        }

        .output-value {
            font-size: 16px;
            font-weight: bold;
            color: #1b5e20;
            background-color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #a5d6a7;
            text-align: right;
        }

        .results-section {
            background-color: #fffde7;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #ffe082;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 12px;
            margin-top: 15px;
        }

        .result-item {
            padding: 12px;
            border-radius: 8px;
            background-color: #fff9c4;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-item.final {
            background-color: #ffecb3;
            padding: 16px;
            font-weight: bold;
        }

        .result-label {
            font-weight: 600;
            color: #5d4037;
            font-size: 15px;
        }

        .result-value {
            font-size: 18px;
            font-weight: bold;
            color: #e65100;
            min-width: 100px;
            text-align: right;
        }

        .btn-calculate {
            display: block;
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .btn-calculate:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-calculate:active {
            transform: translateY(1px);
        }

        .footer {
            text-align: center;
            margin-top: 15px;
            color: #7f8c8c;
            font-size: 13px;
            padding-top: 12px;
            border-top: 1px solid #ecf0f1;
        }

        .category-container {
            position: relative;
        }

        .category-levels {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }

        .category-search {
            position: relative;
        }

        .category-search input {
            padding-right: 40px;
        }

        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #7f8c8d;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            max-height: 150px;
            overflow-y: auto;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: none;
        }

        .search-result-item {
            padding: 8px 12px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 14px;
        }

        .search-result-item:hover {
            background-color: #f0f8ff;
        }

        .language-switcher {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .lang-btn {
            background: #1a2a6c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 13px;
        }

        .lang-btn.active {
            background: #ff8c00;
            transform: scale(1.05);
        }

        .currency-selector {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .currency-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .currency-radio {
            margin-right: 6px;
        }

        .currency-label {
            font-weight: 500;
            font-size: 14px;
        }

        .switch-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 5px;
            padding: 8px 0;
            border-top: 1px dashed #e0e0e0;
        }

        .switch-label {
            font-size: 14px;
            color: #555;
            font-weight: 500;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 45px;
            height: 22px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 22px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #2196F3;
        }

        input:focus + .slider {
            box-shadow: 0 0 1px #2196F3;
        }

        input:checked + .slider:before {
            transform: translateX(23px);
        }

        .cost-price-container {
            display: grid;
            grid-template-columns: 1fr; 
            gap: 8px;
            margin-top: 12px;
            background: #f5f9ff; 
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e3f2fd;
        }

        .cost-price-group {
            background: #fff; 
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #bbdefb;
            transition: all 0.3s ease;
        }

        .cost-price-group:hover {
            border-color: #64b5f6;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.1);
        }

        .cost-price-group label {
            display: block;
            margin-bottom: 6px;
            font-size: 13px;
            color: #1976d2;
            font-weight: 500;
        }

        .cost-price-group input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #e3f2fd;
            border-radius: 6px;
            font-size: 14px;
            color: #0d47a1;
            background: #fff;
            transition: all 0.3s ease;
        }

        .cost-price-group input:focus {
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
            outline: none;
        }

        .commission-display {
            margin-top: 5px;
            font-size: 13px;
            color: #3498db;
            font-weight: 500;
        }

        .lang-ru .purchase-label::after,
        .lang-ru .shipping-label::after,
        .lang-ru .gross-profit-label::after {
            content: " (₸)";
        }

        .lang-zh .gross-profit-label::after {
            content: " (¥)";
        }

        .lang-ru .form-control::placeholder {
            font-style: normal;
        }

        .toggle-off {
            color: #e74c3c;
            font-weight: bold;
        }

        .history-section {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        }

        .history-section h3 {
            font-size: 18px;
            color: #1a2a6c;
            margin-bottom: 15px;
            padding-bottom: 6px;
            border-bottom: 2px solid #3498db;
            font-weight: 600;
        }

        .history-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-bottom: 15px;
        }

        .history-btn {
            padding: 8px 16px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .history-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .history-table-container {
            overflow-x: auto;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        #historyTable {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        #historyTable th {
            background-color: #1a2a6c;
            color: white;
            padding: 10px;
            text-align: left;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        #historyTable td {
            padding: 8px 10px;
            border-bottom: 1px solid #ddd;
        }

        #historyTable tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #historyTable tr:hover {
            background-color: #e3f2fd;
        }

        #historyTable .delete-btn {
            padding: 5px 10px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #historyTable .delete-btn:hover {
            background-color: #c0392b;
        }

        .disclaimer-section {
            background-color: #fff3e0;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #ffcc80;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        }

        .disclaimer-section h3 {
            color: #e65100;
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 6px;
            border-bottom: 2px solid #ff9800;
        }

        .disclaimer-content p {
            font-size: 14px;
            color: #5d4037;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .advertisement-section {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            color: white;
        }

        .ad-title {
            text-align: center;
            color: white !important;
        }

        .ad-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .ad-item {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ad-item:hover {
            background-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .lang-ru .ad-grid {
            display: none;
        }

        .contact-section {
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ecf0f1;
        }

        .contact-info {
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 500;
        }

        #contact-link {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        #contact-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .close {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        #modalBody {
            text-align: center;
            font-size: 18px;
            line-height: 1.6;
        }

        #modalBody img {
            max-width: 100%;
            border-radius: 10px;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .ad-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .modal-content {
                width: 90%;
                margin: 20% auto;
            }
        }

        /* 移动端优化 */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 20px;
            }
            
            .header h2 {
                font-size: 16px;
            }
            
            .exchange-rate {
                flex-direction: row;
                align-items: center;
                padding: 8px 12px;
            }
            
            .exchange-rate label {
                font-size: 14px;
            }
            
            .exchange-rate input {
                width: 100px;
                padding: 6px 8px;
                font-size: 14px;
            }
            
            .dimensions {
                grid-template-columns: 1fr 1fr 1fr;
            }
            
            .section {
                padding: 12px;
            }
            
            .section-title {
                font-size: 16px;
            }
            
            .btn-calculate {
                padding: 12px;
                font-size: 16px;
                margin: 15px 0;
            }
            
            .result-label, .result-value {
                font-size: 14px;
            }
            
            .result-value {
                min-width: 80px;
                font-size: 16px;
            }
            
            .currency-selector {
                flex-direction: column;
                gap: 8px;
            }
            
            .language-switcher {
                top: 5px;
                right: 5px;
            }
            
            .lang-btn {
                padding: 5px 10px;
                font-size: 12px;
            }
            
            .results-section {
                padding: 15px;
            }
            
            .kaspi-price-container {
                grid-template-columns: 1fr;
            }
        }

        /* 平板优化 */
        @media (min-width: 481px) and (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
            }
            
            .output-section {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
            
            .header {
                padding-top: 30px;
            }
            
            .header h1 {
                font-size: 22px;
            }
            
            .header h2 {
                font-size: 17px;
            }
            
            .dimensions {
                grid-template-columns: 1fr 1fr 1fr;
                gap: 10px;
            }
        }

        /* 桌面优化 */
        @media (min-width: 769px) {
            .input-section {
                grid-template-columns: 1fr 1fr;
            }
            
            .output-section {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* 避免移动端键盘弹出时遮挡输入框 */
        @media (max-height: 600px) and (orientation: landscape) {
            .container {
                max-height: 95vh;
                overflow-y: auto;
            }
        }
    </style>
</head>
<body>
<!-- 锁定屏幕 -->
<div id="lock-screen" class="lock-screen">
    <div class="lock-container">
        <div class="lock-header">
            <h1 id="lock-company-name">新疆航贸通国际供应链有限公司</h1>
            <h2 id="lock-app-title">Kaspi 电商利润计算器</h2>
        </div>
        
        <div class="lock-form">
            <div class="form-group">
                <label id="key-label">请输入解锁密钥</label>
                <input id="unlock-key" type="password" placeholder="输入密钥..." autocomplete="off">
                <div class="error-message" id="key-error"></div>
            </div>
            
            <button class="btn-unlock" id="unlockBtn">解锁应用</button>
            
            <div class="lock-time" id="lock-time">
                <span id="time-label">剩余使用时间:</span>
                <span id="time-countdown">00:00:00</span>
            </div>
            
            <!-- 密钥验证状态显示 -->
            <div class="key-validation" id="key-validation">
                <div id="key-status">密钥状态: <span class="key-status invalid-key">未验证</span></div>
                <div id="expiry-info">有效期: --</div>
                <div id="device-info">设备ID: --</div>
            </div>
            
            <div class="lock-language">
                <div class="language-switcher">
                    <button class="lang-btn active" data-lang="zh">中文</button>
                    <button class="lang-btn" data-lang="ru">Русский</button>
                </div>
            </div>
            
            <div class="lock-contact">
                <div class="contact-info">
                    <span>业务咨询：</span>
                    <a href="#" id="lock-contact-link">点击联系客服</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 主应用内容 -->
<div id="app-content" class="container">
    <!-- 原有应用内容保持不变 -->
    <!-- ... 原有应用内容 ... -->
</div>

<!-- 联系弹窗 -->
<div id="contactModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modalBody"></div>
    </div>
</div>

<script>
    // translations.js
    const translations = {
        zh: {
            companyName: "新疆航贸通国际供应链有限公司",
            appTitle: "Kaspi 电商利润计算器",
            exchangeLabel: "当前汇率：1元人民币兑换",
            currencyLabel: "哈萨克斯坦坚戈",
            productInfo: "产品信息",
            categoryLabel: "商品分类",
            purchaseLabel: "采购价 (¥)",
            shippingLabel: "运费 (¥)",
            grossProfitLabel: "计划毛利 (¥)",
            cashbackLabel: "下单返利（%）",
            paymentLabel: "汇款方式",
            logisticsTitle: "物流信息",
            dimensionLabel: "尺寸（厘米）",
            volumeLabel: "体积（立方米）",
            weightLabel: "重量（千克）",
            kaspiPriceLabel: "Kaspi 售价",
            feesTitle: "头程、海外仓费用",
            overseasLabel: "海外仓费用",
            firstmileLabel: "头程费用",
            platformTitle: "平台费用",
            cashbackAmountLabel: "下单返利",
            kaspiShippingLabel: "Kaspi 运费",
            platformFeeLabel: "平台佣金",
            withdrawalTaxLabel: "提现税（4%）",
            returnTitle: "回款费用",
            withdrawalFeeLabel: "提现手续费（1%）",
            exchangeLossLabel: "汇损（1.42%）",
            remittanceFeeLabel: "汇款手续费",
            returnAmountLabel: "回款金额",
            kaspiPayLabel: "Kaspi pay提现到账金额",
            estimatedAmountLabel: "预估到账金额",
            profitLabelFinal: "利润",
            copyright: "© 2023 新疆航贸通国际供应链有限公司 | Kaspi 电商利润计算器",
            calculateBtn: "计算利润",
            cnyLabel: "人民币 (CNY)",
            kztLabel: "哈萨克斯坦坚戈 (KZT)",
            commissionLabel: "当前佣金率：",
            purchasePlaceholder: "输入采购价",
            shippingPlaceholder: "阿拉木图运费",
            grossProfitPlaceholder: "输入计划毛利",
            cashbackPlaceholder: "输入下单返利",
            weightPlaceholder: "输入重量",
            lengthPlaceholder: "长",
            widthPlaceholder: "宽",
            heightPlaceholder: "高",
            exchangePlaceholder: "输入汇率",
            categorySearchPlaceholder: "搜索分类...",
            overseasUnitLabel: "海外仓单价 (¥/m³)",
            firstmileUnitLabel: "头程单价 (¥/m³)",
            kaspiPriceCnyLabel: "人民币 (¥)",
            kaspiPriceKztLabel: "坚戈 (₸)",
            overseasToggleLabel: "是否计算海外仓费用",
            firstmileToggleLabel: "是否计算头程费用",
            withdrawalFeeToggleLabel: "是否计算提现手续费",
            exchangeLossToggleLabel: "是否计算汇损",
            remittanceFeeToggleLabel: "是否计算汇款手续费",
            historyTitle: "历史记录",
            exportBtn: "导出为CSV",
            clearBtn: "清空历史",
            deleteBtn: "删除",
            historyTableHeaders: [
                "商品分类", "采购价", "运费", "计划毛利", "下单返利(%)", "汇款方式",
                "尺寸(长宽高)", "体积", "重量", "海外仓费用", "头程费用", "下单返利",
                "Kaspi运费", "平台佣金", "提现税", "提现手续费", "汇损", "汇款手续费",
                "Kaspi提现", "回款金额", "预估到账", "利润", "币种", "操作"
            ],
            contactLabel: "业务咨询：",
            contactLinkText: "点击联系客服",
            disclaimerTitle: "免责声明",
            disclaimerText1: "以上计算结果仅供参考，不代表最终费用。实际费用可能因市场变化、汇率波动、平台政策调整等因素而有所不同，请以实际情况为准。",
            disclaimerText2: "本计算器提供的数据仅作为商业决策的参考依据，不构成任何形式的承诺或保证。使用本工具产生的任何商业风险由使用者自行承担。",
            adTitle: "增值服务",
            // 锁定屏幕翻译
            keyLabel: "请输入解锁密钥",
            keyPlaceholder: "输入密钥...",
            unlockBtn: "解锁应用",
            timeLabel: "剩余使用时间:"
        },
        ru: {
            companyName: "Синьцзянская Международная Логистическая Компания Хан Мао Тун",
            appTitle: "Калькулятор прибыли Kaspi",
            exchangeLabel: "Текущий курс: 1 юань = ",
            currencyLabel: "казахстанских тенге",
            productInfo: "Информация о продукте",
            categoryLabel: "Категория товара",
            purchaseLabel: "Закупочная цена (₸)",
            shippingLabel: "Стоимость доставки (₸)",
            grossProfitLabel: "Плановая валовая прибыль (₸)",
            cashbackLabel: "Кэшбэк за заказ (%)",
            paymentLabel: "Способ оплаты",
            logisticsTitle: "Логистическая информация",
            dimensionLabel: "Размеры (см)",
            volumeLabel: "Объем (м³)",
            weightLabel: "Вес (кг)",
            kaspiPriceLabel: "Цена на Kaspi",
            feesTitle: "Расходы на доставку и склад",
            overseasLabel: "Стоимость зарубежного склада (₸)",
            firstmileLabel: "Стоимость первой мили (₸)",
            platformTitle: "Платежи платформы",
            cashbackAmountLabel: "Сумма кэшбэка (₸)",
            kaspiShippingLabel: "Доставка Kaspi (₸)",
            platformFeeLabel: "Комиссия платформы (₸)",
            withdrawalTaxLabel: "Налог на вывод (4%) (₸)",
            returnTitle: "Расходы на возврат средств",
            withdrawalFeeLabel: "Комиссия за вывод (1%) (₸)",
            exchangeLossLabel: "Потери при обмене (1.42%) (₸)",
            remittanceFeeLabel: "Комиссия за перевод (₸)",
            returnAmountLabel: "Сумма возврата (₸)",
            kaspiPayLabel: "Сумма вывода Kaspi pay (₸)",
            estimatedAmountLabel: "Ожидаемая сумма к получению (₸)",
            profitLabelFinal: "Прибыль (₸)",
            copyright: "© 2023 Синьцзянская Международная Логистическая Компания Хан Мао Тун | Калькулятор прибыли Kaspi",
            calculateBtn: "Рассчитать прибыль",
            cnyLabel: "Юань (CNY)",
            kztLabel: "Тенге (KZT)",
            commissionLabel: "Текущая комиссия: ",
            purchasePlaceholder: "Введите закупочную цену",
            shippingPlaceholder: "Стоимость доставки в Алматы",
            grossProfitPlaceholder: "Введите плановую валовую прибыль",
            cashbackPlaceholder: "Введите кэшбэк за заказ",
            weightPlaceholder: "Введите вес",
            lengthPlaceholder: "Длина",
            widthPlaceholder: "Ширина",
            heightPlaceholder: "Высота",
            exchangePlaceholder: "Введите курс обмена",
            categorySearchPlaceholder: "Поиск категории...",
            overseasUnitLabel: "Цена зарубежного склада (₸/м³)",
            firstmileUnitLabel: "Цена первой мили (₸/м³)",
            kaspiPriceCnyLabel: "Юань (¥)",
            kaspiPriceKztLabel: "Тенге (₸)",
            overseasToggleLabel: "Расчет стоимости зарубежного склада",
            firstmileToggleLabel: "Расчет стоимости первой мили",
            withdrawalFeeToggleLabel: "Расчет комиссии за вывод",
            exchangeLossToggleLabel: "Расчет потерь при обмене",
            remittanceFeeToggleLabel: "Расчет комиссии за перевод",
            historyTitle: "История расчетов",
            exportBtn: "Экспорт в CSV",
            clearBtn: "Очистить историю",
            deleteBtn: "Удалить",
            historyTableHeaders: [
                "Категория", "Закупочная цена", "Стоимость доставки", "Плановая валовая прибыль", "Кэшбэк за заказ(%)", "Способ оплаты",
                "Размеры(Д×Ш×В)", "Объем", "Вес", "Стоимость зарубежного склада", "Стоимость первой мили", "Кэшбэк",
                "Доставка Kaspi", "Комиссия платформы", "Налог на вывод", "Комиссия за вывод", "Потери при обмене", "Комиссия за перевод",
                "Вывод Kaspi", "Сумма возврата", "Ожидаемая сумма", "Прибыль", "Валюта", "Действие"
            ],
            contactLabel: "Бизнес-консультации:",
            contactLinkText: "Нажмите, чтобы связаться",
            disclaimerTitle: "Отказ от ответственности",
            disclaimerText1: "Приведенные выше результаты расчетов приведены только для справки и не являются окончательной стоимостью. Фактические расходы могут различаться из-за изменения рыночных условий, колебаний обменного курса, корректировок политики платформы и других факторов. Пожалуйста, основывайтесь на фактической ситуации.",
            disclaimerText2: "Данные, предоставляемые данным калькулятором, предназначены только для справки при принятии коммерческих решений и не являются каким-либо обязательством или гарантией. Любые коммерческие риски, возникающие при использовании данного инструмента, несет пользователь.",
            adTitle: "Дополнительные услуги",
            // 锁定屏幕翻译
            keyLabel: "Введите ключ разблокировки",
            keyPlaceholder: "Введите ключ...",
            unlockBtn: "Разблокировать",
            timeLabel: "Оставшееся время:"
        }
    };

    // categories.js
    const categories = [
        { id: "auto-cards", name: { zh: "汽车名片", ru: "Автомобильные визитки" }, commission: 0.12 },
        { id: "watch-straps", name: { zh: "手表带", ru: "Ювелирные ремешки и браслеты для часов" }, commission: 0.15 }
    ];
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // 设备ID生成函数
        function generateDeviceId() {
            const id = 'DEV-' + Math.random().toString(36).substr(2, 6).toUpperCase();
            localStorage.setItem('deviceId', id);
            return id;
        }

        // 获取设备ID
        function getDeviceId() {
            let deviceId = localStorage.getItem('deviceId');
            if (!deviceId) {
                deviceId = generateDeviceId();
            }
            return deviceId;
        }

        // 日期格式化函数
        function formatDate(date) {
            return new Intl.DateTimeFormat('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).format(date);
        }

        // 密钥验证函数
        function validateKey(key) {
            const deviceId = getDeviceId();
            const keys = JSON.parse(localStorage.getItem('keys')) || [];
            const now = new Date();
            
            // 查找匹配的密钥
            const keyRecord = keys.find(k => k.key === key);
            
            if (!keyRecord) {
                return {
                    valid: false,
                    message: '密钥不存在'
                };
            }
            
            // 检查是否过期
            if (new Date(keyRecord.expiresAt) < now && keyRecord.status !== 'used') {
                keyRecord.status = 'expired';
                localStorage.setItem('keys', JSON.stringify(keys));
                return {
                    valid: false,
                    message: '密钥已过期'
                };
            }
            
            // 检查状态
            if (keyRecord.status === 'used') {
                if (keyRecord.usedBy === deviceId) {
                    return {
                        valid: true,
                        message: '该密钥已由本设备使用',
                        keyRecord: keyRecord
                    };
                } else {
                    return {
                        valid: false,
                        message: '密钥已在其他设备使用',
                        keyRecord: keyRecord
                    };
                }
            }
            
            // 标记为已使用
            keyRecord.status = 'used';
            keyRecord.usedBy = deviceId;
            keyRecord.usedAt = now;
            localStorage.setItem('keys', JSON.stringify(keys));
            
            return {
                valid: true,
                message: '密钥验证成功',
                keyRecord: keyRecord
            };
        }

        // 更新密钥状态显示
        function updateKeyStatus(result) {
            const keyStatus = document.getElementById('key-status');
            const expiryInfo = document.getElementById('expiry-info');
            const deviceInfo = document.getElementById('device-info');
            
            if (result.valid) {
                keyStatus.innerHTML = `密钥状态: <span class="key-status valid-key">有效</span>`;
                expiryInfo.textContent = `有效期: ${formatDate(new Date(result.keyRecord.expiresAt))}`;
                deviceInfo.textContent = `设备ID: ${result.keyRecord.usedBy || getDeviceId()}`;
            } else {
                keyStatus.innerHTML = `密钥状态: <span class="key-status invalid-key">无效</span>`;
                expiryInfo.textContent = `有效期: --`;
                deviceInfo.textContent = `设备ID: --`;
            }
        }

        // 错误消息翻译（俄语）
        function translateErrorMessage(message) {
            const translations = {
                '密钥不存在': 'Ключ не существует',
                '密钥已过期': 'Срок действия ключа истек',
                '密钥已在其他设备使用': 'Ключ уже используется на другом устройстве'
            };
            return translations[message] || message;
        }

        // 锁定屏幕元素
        const lockScreen = document.getElementById('lock-screen');
        const unlockKeyInput = document.getElementById('unlock-key');
        const unlockBtn = document.getElementById('unlockBtn');
        const keyError = document.getElementById('key-error');
        const timeCountdown = document.getElementById('time-countdown');
        const appContent = document.getElementById('app-content');
        
        // 初始化变量
        let currentLanguage = 'zh';
        let currentCurrency = 'cny';
        let currentCommission = 0.12;
        let unlockTimer = null;
        let remainingTime = 0; // 单位：秒
        
        // 模拟密钥验证
        function validateLocalKey(key) {
            return key === "123456";
        }
        
        // 模拟获取使用时间
        function getUsageTime() {
            return 3600; // 1小时
        }
        
        // 解锁应用
        function unlockApp() {
            const key = unlockKeyInput.value.trim();
            const deviceId = getDeviceId();
            
            if (!key) {
                keyError.textContent = currentLanguage === 'zh' ? '请输入密钥' : 'Введите ключ';
                keyError.style.display = 'block';
                return;
            }
            
            // 验证密钥
            const result = validateKey(key);
            updateKeyStatus(result);
            
            if (!result.valid) {
                keyError.textContent = currentLanguage === 'zh' ? result.message : translateErrorMessage(result.message);
                keyError.style.display = 'block';
                return;
            }
            
            // 隐藏错误消息
            keyError.style.display = 'none';
            
            // 隐藏锁定屏幕
            lockScreen.style.display = 'none';
            
            // 显示应用内容
            appContent.style.display = 'block';
            
            // 开始倒计时
            startCountdown();
            
            // 初始化应用
            initializePage();
        }
        
        // 开始倒计时
        function startCountdown() {
            clearInterval(unlockTimer);
            
            unlockTimer = setInterval(() => {
                remainingTime--;
                
                if (remainingTime <= 0) {
                    clearInterval(unlockTimer);
                    lockApp();
                    return;
                }
                
                updateCountdownDisplay();
            }, 1000);
            
            updateCountdownDisplay();
        }
        
        // 更新倒计时显示
        function updateCountdownDisplay() {
            const hours = Math.floor(remainingTime / 3600);
            const minutes = Math.floor((remainingTime % 3600) / 60);
            const seconds = remainingTime % 60;
            
            timeCountdown.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // 锁定应用
        function lockApp() {
            clearInterval(unlockTimer);
            lockScreen.style.display = 'flex';
            appContent.style.display = 'none';
            unlockKeyInput.value = '';
            remainingTime = 0;
            timeCountdown.textContent = '00:00:00';
        }
        
        // 绑定解锁按钮事件
        unlockBtn.addEventListener('click', unlockApp);
        
        // 绑定回车键解锁
        unlockKeyInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                unlockApp();
            }
        });
        
        // 锁定状态下的语言切换
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // 更新按钮状态
                document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // 更新语言
                currentLanguage = this.dataset.lang;
                
                // 更新锁定界面文本
                updateLockScreenText();
            });
        });
        
        // 更新锁定界面文本
        function updateLockScreenText() {
            const trans = translations[currentLanguage];

            document.getElementById('lock-company-name').textContent = trans.companyName;
            document.getElementById('lock-app-title').textContent = trans.appTitle;
            document.getElementById('key-label').textContent = trans.keyLabel;
            document.getElementById('unlock-key').placeholder = trans.keyPlaceholder;
            document.getElementById('time-label').textContent = trans.timeLabel;
            document.getElementById('unlockBtn').textContent = trans.unlockBtn;

            // 更新锁定界面联系文本
            const lockContactSpan = document.querySelector('.lock-contact .contact-info span');
            if (lockContactSpan) {
                lockContactSpan.textContent = trans.contactLabel;
            }
            document.getElementById('lock-contact-link').textContent = trans.contactLinkText;

            // 更新主应用联系文本
            const contactSpan = document.querySelector('.contact-section .contact-info span');
            if (contactSpan) {
                contactSpan.textContent = trans.contactLabel;
            }
            document.getElementById('contact-link').textContent = trans.contactLinkText;
        }
        
        // 锁定状态下的联系功能
        document.getElementById('lock-contact-link').addEventListener('click', function(e) {
            e.preventDefault();
            showContactModal();
        });
        
        // 显示联系弹窗
        function showContactModal() {
            const modal = document.getElementById('contactModal');
            const modalBody = document.getElementById('modalBody');
            
            if (currentLanguage === 'zh') {
                modalBody.innerHTML = `
                    <h3>联系我们</h3>
                    <p>业务咨询请通过以下方式联系：</p>
                    <div style="background:#f0f0f0;padding:15px;border-radius:10px;display:inline-block;">
                        <div style="width:200px;height:200px;background:#3498db;display:flex;justify-content:center;align-items:center;margin:0 auto;border-radius:8px;">
                            <span style="color:white;font-size:24px;">客服二维码</span>
                        </div>
                    </div>
                    <p style="margin-top:15px;">扫描二维码或保存图片联系客服</p>
                `;
            } else {
                modalBody.innerHTML = `
                    <h3>Свяжитесь с нами</h3>
                    <p>Для консультации по вопросам бизнеса:</p>
                    <div class="whatsapp-contact" style="background:#f0f0f0;padding:15px;border-radius:10px;">
                        <p style="font-size:18px;"><strong>WhatsApp:</strong></p>
                        <p class="phone-number" style="font-size:24px;font-weight:bold;color:#3498db;">+7 (705) 911-91-43</p>
                    </div>
                    <p style="margin-top:15px;">Рабочее время: Пн-Пт, 9:00-18:00</p>
                `;
            }
            
            modal.style.display = 'block';
        }
        
        // 弹窗关闭功能
        document.querySelector('.close').addEventListener('click', function() {
            document.getElementById('contactModal').style.display = 'none';
        });
        
        window.addEventListener('click', function(e) {
            if (e.target === document.getElementById('contactModal')) {
                document.getElementById('contactModal').style.display = 'none';
            }
        });
        
        // 初始化锁定界面
        updateLockScreenText();
        
        // 初始化设备ID
        getDeviceId();
    });

    function initializePage() {
        console.log("应用已初始化");
        // 在此处添加页面初始化逻辑，例如加载数据或设置默认值
    }
</script>
<script>
    // 主应用功能代码
    document.addEventListener('DOMContentLoaded', function() {
        // 原有应用功能代码
        // ... 
    });
</script>
</body>
</html>